(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/create"],{"14ef":function(e,t,r){"use strict";r.r(t);var i=r("390b"),n=r.n(i);for(var o in i)"default"!==o&&function(e){r.d(t,e,(function(){return i[e]}))}(o);t["default"]=n.a},"390b":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={data:function(){return{orderReqeust:{skuList:[],totalOriginalPrice:0,totalPrice:0,coupon:void 0,mono:"",takeWay:"",freightPrice:0,addressId:void 0},skuCategoryPriceMap:{},maskState:0,couponList:[],isVip:!1,addressData:{consignee:"",phone:"",province:"",city:"",county:"",address:"",defaultAddress:!1},submiting:!1}},onShow:function(){this.isVip=this.$api.isVip()},onLoad:function(e){this.isVip=this.$api.isVip();var t=this;e.takeway&&(t.orderReqeust.takeWay=e.takeway),t.orderReqeust.skuList=t.$api.globalData.skuList;var r=0,i=0,n={};t.orderReqeust.skuList.forEach((function(e){r+=e.originalPrice*e.num,i+=t.isVip?e.vipPrice*e.num:e.price*e.num,e.categoryIdList.forEach((function(r){n[r]?n[r]+=t.isVip?e.vipPrice*e.num:e.price*e.num:n[r]=t.isVip?e.vipPrice:e.price}))})),t.skuCategoryPriceMap=n,t.orderReqeust.totalOriginalPrice=r,t.orderReqeust.totalPrice=i,t.$api.request("coupon","getUserCoupons").then((function(e){t.couponList=e.data})),t.$api.request("address","getDefAddress").then((function(e){t.addressData=e.data,t.calcFreightPrice()})),1===t.orderReqeust.skuList.length&&t.orderReqeust.skuList[0].groupShopId&&(t.orderReqeust.groupShopId=t.orderReqeust.skuList[0].groupShopId)},methods:{toggleMask:function(e){var t=this,r="show"===e?10:300,i="show"===e?1:0;this.maskState=2,setTimeout((function(){t.maskState=i}),r)},calcFreightPrice:function(){var e=this;e.addressData&&(e.orderReqeust.addressId=e.addressData.id),e.$api.request("freight","getFreightMoney",{orderRequestDTO:JSON.stringify(e.orderReqeust)}).then((function(t){e.orderReqeust.freightPrice=t.data}))},numberChange:function(e){this.number=e.number},submit:function(){var t=this;t.submiting||(t.submiting=!0,t.addressData.id&&(t.orderReqeust.addressId=t.addressData.id),t.$api.request("order","takeOrder",{orderRequest:JSON.stringify(t.orderReqeust),channel:e.getSystemInfoSync().platform},(function(e){t.submiting=!1,t.$api.msg(e.errmsg)})).then((function(r){e.redirectTo({url:"/pages/pay/pay?orderno="+r.data+"&price="+(t.orderReqeust.totalPrice-(t.orderReqeust.coupon?t.orderReqeust.coupon.discount:0)+t.orderReqeust.freightPrice)})})))},selectCoupon:function(e){this.orderReqeust.coupon=e,this.maskState=0,this.calcFreightPrice()},stopPrevent:function(){}}};t.default=r}).call(this,r("543d")["default"])},4026:function(e,t,r){"use strict";var i=r("665c"),n=r.n(i);n.a},"665c":function(e,t,r){},8374:function(e,t,r){"use strict";(function(e){r("435e"),r("921b");i(r("66fd"));var t=i(r("87a7"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,r("543d")["createPage"])},"87a7":function(e,t,r){"use strict";r.r(t);var i=r("cbe0"),n=r("14ef");for(var o in n)"default"!==o&&function(e){r.d(t,e,(function(){return n[e]}))}(o);r("4026");var s,a=r("f0c5"),u=Object(a["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],s);t["default"]=u.exports},cbe0:function(e,t,r){"use strict";var i,n=function(){var e=this,t=e.$createElement,r=(e._self._c,e.__map(e.couponList,(function(t,r){var i=e._f("dateFormat")(t.gmtEnd);return{$orig:e.__get_orig(t),f0:i}})));e.$mp.data=Object.assign({},{$root:{l0:r}})},o=[];r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return i}))}},[["8374","common/runtime","common/vendor"]]]);