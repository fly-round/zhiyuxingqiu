(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/product/detail"],{"040c":function(e,o,t){"use strict";t.r(o);var s=t("5f39"),i=t.n(s);for(var n in s)"default"!==n&&function(e){t.d(o,e,(function(){return s[e]}))}(n);o["default"]=i.a},"1ab6":function(e,o,t){"use strict";var s=t("ef99"),i=t.n(s);i.a},"5f39":function(e,o,t){"use strict";(function(e){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=function(){t.e("components/uni-number-box").then(function(){return resolve(t("0a16"))}.bind(null,t)).catch(t.oe)},i=function(){Promise.all([t.e("common/vendor"),t.e("components/u-parse/u-parse")]).then(function(){return resolve(t("bddd"))}.bind(null,t)).catch(t.oe)},n={components:{uParse:i,uniNumberBox:s},data:function(){return{goods:{freightTemplate:void 0,skuList:[],categoryList:[],appraisePage:void 0},isVip:!1,specClass:"none",specSelected:[],buyNum:1,selectedSku:{},selectedSkuIndex:-1,toggleCallback:void 0,maskState:0,couponList:[],submiting:!1}},onShow:function(){this.isVip=this.$api.isVip()},onLoad:function(o){var t=this;e.showLoading({title:"正在加载"}),t.$api.request("goods","getGoods",{spuId:o.id,groupShopId:o.gid?o.gid:""},(function(o){t.$api.msg(o.errmsg),e.hideLoading()})).then((function(o){if(t.goods=o.data,t.goods.groupShop){t.goods.price=t.goods.groupShop.minPrice,t.goods.vipPrice=t.goods.groupShop.minPrice;for(var s=0;s<t.goods.skuList.length;s++)for(var i=0;i<t.goods.groupShop.groupShopSkuList.length;i++)t.goods.skuList[s].id===t.goods.groupShop.groupShopSkuList[i].skuId&&(t.goods.skuList[s].price=t.goods.groupShop.groupShopSkuList[i].skuGroupShopPrice,t.goods.skuList[s].vipPrice=t.goods.groupShop.groupShopSkuList[i].skuGroupShopPrice)}e.hideLoading()})),t.$api.request("coupon","getObtainableCoupon").then((function(e){t.couponList=e.data}))},onShareAppMessage:function(){return{title:(this.goods.groupShop?"立即拼团-":"好货分享-")+this.goods.title,imageUrl:"https://easycampus-asset.oss-cn-shenzhen.aliyuncs.com/sharebg.png",path:"/pages/product/detail?id="+this.goods.id+(this.goods.groupShop?"&gid="+this.goods.groupShop.id:"")}},methods:{numberChange:function(e){this.buyNum=e.number},toggleMask:function(e){var o=this,t="show"===e?10:300,s="show"===e?1:0;this.maskState=2,setTimeout((function(){o.maskState=s}),t)},obtainCoupon:function(e){var o=this;o.$api.request("coupon","obtainCoupon",{couponId:o.couponList[e].id}).then((function(t){o.$api.msg("领取成功"),o.couponList[e].nowCount++,o.toggleMask()}))},toggleSpec:function(e){var o=this;"show"===this.specClass?(this.specClass="hide",setTimeout((function(){o.specClass="none",o.toggleCallback&&(o.toggleCallback(),o.toggleCallback=void 0)}),150)):"none"===this.specClass&&(this.specClass="show",this.selectedSku.title||(this.selectedSku=this.goods.skuList[0],this.selectedSkuIndex=0))},selectSpec:function(e,o){this.selectedSku=e,this.selectedSkuIndex=o},addCart:function(e){var o=this;o.selectedSku.id?o.$api.request("cart","addCartItem",{skuId:o.selectedSku.id,num:o.buyNum?o.buyNum:1}).then((function(e){o.goods.groupShop?o.$api.msg("从购物车结算不会参加团购"):o.$api.msg("添加购物车成功")})):(o.specClass="none",o.toggleSpec(),o.toggleCallback=o.addCart)},toFavorite:function(){var e=this;e.goods.collect?(e.goods.collect=!1,this.$api.request("collect","deleteCollect",{spuId:e.goods.id}).then((function(e){}))):(e.goods.collect=!0,this.$api.request("collect","addCollect",{spuId:e.goods.id}))},buy:function(){var o=this;if(o.selectedSku.id){var t={skuId:o.selectedSku.id,num:o.buyNum,title:o.goods.title,originalPrice:o.selectedSku.originalPrice,price:o.selectedSku.price,vipPrice:o.selectedSku.vipPrice,skuTitle:o.selectedSku.title,spuImg:o.goods.img,skuImg:o.selectedSku.img,stock:o.selectedSku.stock,spuId:o.goods.id,categoryId:o.goods.categoryId,categoryIdList:o.goods.categoryIds};o.goods.groupShop&&(t["groupShopId"]=o.goods.groupShop.id);var s=[1];s[0]=t,o.$api.globalData.skuList=s,e.navigateTo({url:"/pages/order/create?takeway=buy"})}else o.specClass="none",o.toggleSpec(),o.toggleCallback=o.buy},navAllAppraise:function(){e.navigateTo({url:"/pages/product/appraise?spuid=".concat(this.goods.id,"&firstpage=").concat(JSON.stringify(this.goods.appraisePage))})},stopPrevent:function(){}}};o.default=n}).call(this,t("543d")["default"])},8481:function(e,o,t){"use strict";t.r(o);var s=t("ade8"),i=t("040c");for(var n in i)"default"!==n&&function(e){t.d(o,e,(function(){return i[e]}))}(n);t("1ab6");var u,c=t("f0c5"),a=Object(c["a"])(i["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],u);o["default"]=a.exports},ade8:function(e,o,t){"use strict";var s={"u-parse":function(){return Promise.all([t.e("common/vendor"),t.e("components/u-parse/u-parse")]).then(t.bind(null,"bddd"))}},i=function(){var e=this,o=e.$createElement,t=(e._self._c,parseInt((e.isVip?e.selectedSku.vipPrice?e.selectedSku.vipPrice:e.goods.vipPrice:e.selectedSku.price?e.selectedSku.price:e.goods.price)/(e.selectedSku.originalPrice?e.selectedSku.originalPrice:e.goods.originalPrice)*100));e.$mp.data=Object.assign({},{$root:{m0:t}})},n=[];t.d(o,"b",(function(){return i})),t.d(o,"c",(function(){return n})),t.d(o,"a",(function(){return s}))},ef99:function(e,o,t){},f3ff:function(e,o,t){"use strict";(function(e){t("435e"),t("921b");s(t("66fd"));var o=s(t("8481"));function s(e){return e&&e.__esModule?e:{default:e}}e(o.default)}).call(this,t("543d")["createPage"])}},[["f3ff","common/runtime","common/vendor"]]]);